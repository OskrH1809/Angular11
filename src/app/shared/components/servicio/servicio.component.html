<div class="container espacio">
    <h1 class=" text-center">
        <strong>Servicios del mes de {{ Mes[id] }}</strong>
    </h1>
    <!-- aqui -->
    <div class="row">
        <!-- servicio 1 -->
        <div
            *ngFor="let servicio of ListaserviciosContratados"
            class="col-md-4 mb-5 col-sm-6 col-12 pt-4 sombreado"
        >
            <mat-card class="example-card">
                <mat-card-header
                    class="mat-card-header2"
                    *ngIf="servicio.estado == 'Sin Aprobar'"
                >
                    <mat-card-title class="titulo1">
                        {{ servicio.idServicio }}-{{ servicio.id }}
                    </mat-card-title>
                    <mat-card-title class="titulo2">{{ servicio.servicio }}</mat-card-title>
                    <mat-card-title class="fuente">
                        Precio: ${{ servicio.precio }}
                        <br>
                        Estado: {{ servicio.estado }}
                    </mat-card-title>
                </mat-card-header>


                <mat-card-header
                    class="mat-card-header3"
                    *ngIf="servicio.estado == 'Pendiente de aprobación'"
                >
                    <mat-card-title class="titulo1 ">{{ servicio.idServicio }}</mat-card-title>
                    <mat-card-title class="titulo2">{{ servicio.servicio }}</mat-card-title>
                    <mat-card-title class="fuente">
                        Precio: ${{ servicio.precio }}
                        <br>
                        Estado:{{ servicio.estado }}
                    </mat-card-title>
                </mat-card-header>


                <mat-card-header
                    class="mat-card-header1"
                    *ngIf="servicio.estado == 'Aprobado'"
                >
                    <mat-card-title class="titulo1">{{ servicio.idServicio }}</mat-card-title>
                    <mat-card-title class="titulo2">{{ servicio.servicio }}</mat-card-title>
                    <mat-card-title class="fuente">
                        Precio:
                        <s>${{ servicio.precio }}</s>
                        <br>
                        Estado: {{ servicio.estado }}
                    </mat-card-title>
                </mat-card-header>
                <img
                    mat-card-image
                    src
                    alt
                >
                <mat-card-content></mat-card-content>
                <mat-card-actions>
                    <!-- .. -->
                    <div *ngIf="servicio.estado == 'Sin Aprobar'">
                        <div *ngIf="previsualizacion && idImagen == servicio.id">
                            <img
                                class="img"
                                [src]="previsualizacion"
                                alt="imagen"
                            >
                        </div>
                        <br>
                        <div class="pl-2">
                            <input
                                class="mb-3 form-control input-file"
                                (change)="getBase64($event)"
                                (change)="capturarFile($event, servicio.id)"
                                type="file"
                            >
                            <button
                                (click)="subirArchivo(servicio.id)"
                                (click)="nuevoEstado(servicio.id, 2)"
                                [disabled]="fileExist == false"
                                class="mat-buttonn mb-3 btn btn-primary "
                                type="button"
                            >
                                Subir Imagen
                            </button>
                            <!-- <button mat-button class="mat-buttonn pl-4" (click)="subirArchivo()" (click)="pago=!pago"  [disabled]="fileExist==false" (click)="clearImage()"  >Subir Imagen</button> -->
                            <br>
                        </div>
                        <br>


                        <button
                            [disabled]="servicio.estado == 'Sin Aprobar'"
                            class="mat-buttonn"
                            routerLink="/gestiontareas/servicio.idServicio"
                            routerLinkActive="active"
                            mat-button
                        >
                            Gestion tickets
                        </button>
                        <button
                            mat-button
                            [disabled]="servicio.estado == 'Sin Aprobar'"
                            *ngIf="role == 'ADMIN'"
                            class="mat-buttonn"
                        >
                            Desbloquear Servicios
                        </button>
                    </div>
                    <!-- ............. -->
                    <div
                        class
                        *ngIf="servicio.estado == 'Pendiente de aprobación'"
                    >
                        <div class="row imagenContenedor ">
                            <div
                                class="col-md-12 "
                                *ngFor="let documento of documentoEspecifico"
                            >
                                <img
                                    *ngIf="
                    servicio.id == documento.dependent &&
                    servicio.idUsuario == documento.idUser &&
                    documento.tipoDocumento == 'Servicios_Contratados'
                  "
                                    nz-image
                                    width="100px"
                                    class="imagen-pago text-center"
                                    height="100px"
                                    nzSrc="{{ documento.archivo }}"
                                    alt="Imagen"
                                >
                            </div>
                        </div>


                        <br>


                        <button
                            [disabled]="servicio.estado == 'Pendiente de aprobación'"
                            class="mat-buttonn"
                            routerLink="/gestiontareas/{{ id }}"
                            routerLinkActive="active"
                            mat-button
                        >
                            Gestion tickets
                        </button>
                        <button
                            mat-button
                            *ngIf="role == 'ADMIN'"
                            class="mat-buttonn"
                            (click)="nuevoEstado(servicio.id, 3)"
                        >
                            Desbloquear Servicios
                        </button>
                    </div>


                    <div *ngIf="servicio.estado == 'Aprobado'">
                        <button
                            class="mat-buttonn"
                            routerLink="/gestiontareas/{{servicio.idUsuario}}/{{ servicio.idServicio }}"
                            routerLinkActive="active"
                            mat-button
                        >
                            Gestion tickets
                        </button>
                    </div>


                    <hr>
                </mat-card-actions>
            </mat-card>
        </div>
    </div>
</div>
